1 = Advanced License Issues
2 
3 This guide covers two advanced license issues:
4 
5 . Activating a System-Specific License
6 . Usage limits enforced by certain license keys
7 
8 == System-Specific License Activation
9 
10 This section provides step-to-step instructions for activating or renewing a TigerGraph license, by generating and installing a license key unique to that TigerGraph system. This document applies to both non-distributed and distributed systems. In this document, a cluster acting cooperatively as one TigerGraph database is considered one system.
11 
12 A valid license key activates the TigerGraph system for normal operation. A license key has a built-in expiration date and is valid on only one system. Some license keys may apply other restrictions, depending on your contract. Without a valid license key, a TigerGraph system can perform certain administrative functions, but database operations will not work.
13 
14 To activate a new license, a user first configures their TigerGraph system. The user then collects the fingerprint of the TigerGraph system (license seed) using a TigerGraph-provided utility program. Then the collected materials are sent to TigerGraph or an authorized agent via email or web form. TigerGraph certifies the license based on the collected materials and sends a license key back to the user. The user then installs the license key on their system using another TigerGraph command. A new license key (e.g., one with a later expiration) can be installed on a live system that already has a valid license; the installation process does not disrupt database operations.
15 
16 [NOTE]
17 ====
18 If your system is currently using an older string-based license key that does not use a license seed, please contact link:mailto:support@tigergraph.com[support@tigergraph.com]for the procedure to upgrade to the new system-specific license type.
19 ====
20 
21 === Step-by-Step Guide
22 
23 [NOTE]
24 ====
25 Before beginning the license activation process, the TigerGraph package must be installed on each server, and the TigerGraph system must be configured with gadmin.
26 ====
27 
28 . Collect the fingerprint of the whole TigerGraph system using the command `gadmin license seed <host_signature_type>` , which can be executed on any machine in the system. The command packs all the collected data to generate the license seed and writes it into a file. When the command has completed successfully, it outputs the path of the file to the console.
29 +
30 Depending on the host machine, the user needs to choose the appropriate type of host signature for `gadmin` to collect. The options are: `aws`. `azure`, `gcp`, `hardware,` and `node-id`. If you are generating the seed on a cloud instance, choose the corresponding cloud provider for the host signature type. If you are generating the seed on your own machines, choose either `hardware` or `node-id`. Signatures generated with the `hardware` parameter will use unique hardware information that persists through software changes, while signatures generated with `node-id` will use a unique https://man7.org/linux/man-pages/man5/machine-id.5.html#:~:text=The%20%2Fetc%2Fmachine%2Did,may%20not%20be%20all%20zeros.[machine ID]that may change during an OS reinstall. Most users installing their own instances should use the `hardware` option.
31 +
32 .Collect Fingerprint of TigerGraph System
33 +
34 [source,bash]
35 ----
36 $ gadmin license seed hardware
37 [   Info] seed generated at: ./tigergraph_v3_seed, please send it to TigerGraph
38 ----
39 +
40 
41 
42 . Send the license seed file to TigerGraph, either through our license activation web portal (preferred) or by email to link:mailto:license@tigergraph.com.[license@tigergraph.com.]If using email, please include the following information:
43  .. Company/Organization name
44  .. Contract number. If you do not know your contract number, please contact your sales representative or link:mailto:sales@tigergraph.com.[sales@tigergraph.com.]
45 . A new license key file will be certificated and sent back to you.
46 . Copy the license key file to a directory on the TigerGraph system where the TigerGraph Linux user has read permission.
47 . Run the following three commands to install the license key:
48 +
49 [source,text]
50 ----
51 $ gadmin license set <new_license_key>
52 [   Info] Configuration has been changed.
53 Please use 'gadmin config apply' to persist the changes.
54 
55 $ gadmin config apply
56 [Warning] No difference from staging config, config apply is skipped.
57 [   Info] Successfully applied configuration change. Please restart services to make it effective immediately.
58 
59 $ gadmin restart
60 [   Note] Restart the service(s)? (y/N)y
61 [   Info] Stopping DICT ADMIN GSE NGINX GPE RESTPP KAFKASTRM-LL KAFKACONN TS3SERV GSQL TS3 GUI
62 [   Info] Starting ZK ETCD DICT KAFKA ADMIN GSE NGINX GPE RESTPP KAFKASTRM-LL KAFKACONN TS3SERV GSQL TS3 GUI
63 ----
64 
65 If the installation completes successfully, the message "install license successfully" will be displayed in the console.
66 
67 === Checking License Information
68 
69 After a license key has been installed successfully on a TigerGraph system, the information of the installed license is available via either the CLI command `gadmin license status` or via the following REST API:
70 
71 .Get License Information
72 
73 [source,bash]
74 ----
75  $ curl -X GET "localhost:9000/showlicenseinfo"
76   {
77     "message": "",
78     "error": false,
79     "version": {
80       "edition": "developer",
81       "schema": 0,
82       "api": "v2",
83     }
84     "code": "",
85     "results": [
86       {
87         "Days remaining": 10160,
88         "Expiration date": "Mon Oct  2 04:00:00 2045\n"
89       }
90     ]
91   }
92 ----
93 
94 
95 
96 == Usage Limits Controlled by License Key
97 
98 Some license keys include a limit on the graph size, or on the number and size of machines which may be used, or restrict the use of certain optional features. In the case of a memory usage or graph size limit, when a TigerGraph system reaches its license's limit, additional data will not be loaded into the graph. You may still query the graph and delete data. To check whether or not you have exceeded your license limits, use the command *gstatusgraph* and collect the VertexCount, EdgeCount, and Partition Size. Compare this information to the limits established for your license.
99 
100 .Checking graph limits
101 
102 [source,bash]
103 ----
104 ~/tigergraph/loadingData$ gstatusgraph
105 === graph ===
106 [GRAPH  ] Graph was loaded (/home/tigergraph/tigergraph/data/gstore/0/part/):
107 [m1     ] Partition size: 23KiB, IDS size: 47KiB, Vertex count: 5, Edge count: 8, NumOfDeletedVertices: 0 NumOfSkippedVertices: 0
108 [WARN   ] Above vertex and edge counts are for internal use which show approximate topology size of the local graph partition. Use DML to get the correct graph topology information
109 ----
110 
111 
112 
113 The output may include a warning message such such as the following:
114 
115 [source,text]
116 ----
117 [Warning] License limit exceeded. The system is running in limited capacity mode
118 ----

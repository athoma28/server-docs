1 = Managing Credentials
2 :pp: {plus}{plus}
3 
4 When user authentication is enabled, the TigerGraph system will execute a requested operation only if the requester provides credentials for a user who has the privilege to perform the requested operation.
5 
6 The TigerGraph system offers two options for credentials.
7 
8 * Username and password pair.
9 * API token: A unique 32-character string that can be used for REST{pp} requests.  A token expires 1 month from the date of creation by default. Users can use their secrets or their username and password pair to generate a token.
10 
11 The following set of commands are used to create and manage passwords and secrets.
12 
13 .GSQL Commands for Managing Credentials
14 
15 [source,coffeescript]
16 ----
17 ALTER PASSWORD [user1]
18 CREATE SECRET [alias1]
19 SHOW SECRET
20 DROP SECRET <secret1>
21 ----
22 
23 
24 
25 [NOTE]
26 ====
27 Like any other GSQL commands, the user must supply credentials to run these commands. In order to create a secret, the user must supply their password.
28 ====
29 
30 == Passwords
31 
32 Users can change their own passwords with the `ALTER PASSWORD` command. If the user has the `WRITE_USER` privilege, they can change the password of another user.
33 
34 [source,coffeescript]
35 ----
36 ALTER PASSWORD [<user1>]
37 ----
38 
39 If a username is not provided, the command changes the password of the current user. To change the password of another user, specify the username of the user whose password you wish to change:
40 
41 .Example: User changing his/her own password
42 
43 [source,text]
44 ----
45 herminone:GSQL > ALTER PASSWORD
46 Password: *******
47 New Password : ************
48 Re-enter Password : ************
49 Password has been changed.
50 ----
51 
52 
53 
54 .Example: Admin changing another user's password
55 
56 [source,text]
57 ----
58 tigergraph:GSQL > ALTER PASSWORD hermione
59 Password: *******
60 New Password : ************
61 Re-enter Password : ************
62 Password has been changed.
63 ----
64 
65 
66 
67 == Secrets
68 
69 Secrets are unique strings that serve as a user's credentials in certain circumstances. A user can have multiple secret strings. Each secret is associated with one user and their role for one graph. If the role is revoked, the secret also becomes invalid.
70 
71 === Create a secret
72 
73 [source,coffeescript]
74 ----
75 CREATE SECRET [<alias>]
76 ----
77 
78 Use the `CREATE SECRET` command to generate a secret for the current user and graph. It is optional to provide an alias for the secret.
79 
80 Beginning with TigerGraph 3.1.4, the system will generate a random alias for the secret if the user does not provide an alias for that secret. Randomly generated aliases begin with `AUTO_GENERATED_ALIAS_` and include a random 7-character string.
81 
82 === List secrets
83 
84 [source,coffeescript]
85 ----
86 SHOW SECRET
87 ----
88 
89 Use `SHOW SECRET` to list all secrets of the current user. The secrets will be masked and only the first and last three characters of the secrets will be shown. The alias of the secret and the graph that the secret is associated with will also be listed:
90 
91 [source,coffeescript]
92 ----
93 GSQL > SHOW SECRET
94     - Secret: s7s****3k5
95       - Alias: HH
96       - GraphName: Hogwarts
97     - Secret: 75j****9i2
98       - Alias: LL
99       - GraphName: London
100 ----
101 
102 === Drop a secret
103 
104 [source,coffeescript]
105 ----
106 DROP SECRET <secret>
107 ----
108 
109 Use the `DROP SECRET` command to drop a secret. Since a user can have multiple secrets, the secret to drop must be specified in the command. 
110 You can specify a secret either by the secret string itself or by its alias.
111 If you drop a secret, the tokens associated with the secret also become invalid. 
